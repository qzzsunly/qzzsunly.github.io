<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>64.&nbsp;Spring Boot AntLib module</title><link rel="stylesheet" type="text/css" href="css/manual-multipage.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Spring Boot Reference Guide"><link rel="up" href="build-tool-plugins.html" title="Part&nbsp;VIII.&nbsp;Build tool plugins"><link rel="prev" href="build-tool-plugins-gradle-plugin.html" title="63.&nbsp;Spring Boot Gradle plugin"><link rel="next" href="build-tool-plugins-other-build-systems.html" title="65.&nbsp;Supporting other build systems"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">64.&nbsp;Spring Boot AntLib module</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="build-tool-plugins-gradle-plugin.html">Prev</a>&nbsp;</td><th width="60%" align="center">Part&nbsp;VIII.&nbsp;Build tool plugins</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="build-tool-plugins-other-build-systems.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="build-tool-plugins-antlib" href="#build-tool-plugins-antlib"></a>64.&nbsp;Spring Boot AntLib module</h2></div></div></div><p>The Spring Boot AntLib module provides basic Spring Boot support for Apache Ant. You can
use the module to create executable jars. To use the module you need to declare an
additional <code class="literal">spring-boot</code> namespace in your <code class="literal">build.xml</code>:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;project</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">xmlns:ivy</span>=<span xmlns:d="http://docbook.org/ns/docbook" class="hl-value">"antlib:org.apache.ivy.ant"</span>
    <span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">xmlns:spring-boot</span>=<span xmlns:d="http://docbook.org/ns/docbook" class="hl-value">"antlib:org.springframework.boot.ant"</span>
    <span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">name</span>=<span xmlns:d="http://docbook.org/ns/docbook" class="hl-value">"myapp"</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">default</span>=<span xmlns:d="http://docbook.org/ns/docbook" class="hl-value">"build"</span><span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&gt;</span>
    ...
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;/project&gt;</span></pre><p>You&#8217;ll need to remember to start Ant using the <code class="literal">-lib</code> option, for example:</p><pre class="screen">$ ant -lib &lt;folder containing spring-boot-antlib-2.0.0.BUILD-SNAPSHOT.jar&gt;</pre><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>The &#8220;Using Spring Boot&#8221; section includes a more complete example of
<a class="link" href="using-boot-build-systems.html#using-boot-ant" title="13.4&nbsp;Ant">using Apache Ant with <code class="literal">spring-boot-antlib</code></a></p></td></tr></table></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_spring_boot_ant_tasks" href="#_spring_boot_ant_tasks"></a>64.1&nbsp;Spring Boot Ant tasks</h2></div></div></div><p>Once the <code class="literal">spring-boot-antlib</code> namespace has been declared, the following additional
tasks are available.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_spring_boot_exejar" href="#_spring_boot_exejar"></a>64.1.1&nbsp;spring-boot:exejar</h3></div></div></div><p>The <code class="literal">exejar</code> task can be used to creates a Spring Boot executable jar. The following
attributes are supported by the task:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">Attribute</th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">Description</th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top">Required</th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p><code class="literal">destfile</code></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>The destination jar file to create</p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>Yes</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p><code class="literal">classes</code></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>The root directory of Java class files</p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>Yes</p></td></tr><tr><td style="border-right: 0.5pt solid ; " align="left" valign="top"><p><code class="literal">start-class</code></p></td><td style="border-right: 0.5pt solid ; " align="left" valign="top"><p>The main application class to run</p></td><td style="" align="left" valign="top"><p>No <span class="emphasis"><em>(default is first class found declaring a <code class="literal">main</code> method)</em></span></p></td></tr></tbody></table></div><p>The following nested elements can be used with the task:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">Element</th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top">Description</th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p><code class="literal">resources</code></p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>One or more <a class="link" href="http://ant.apache.org/manual/Types/resources.html#collection" target="_top">Resource Collections</a>
describing a set of <a class="link" href="http://ant.apache.org/manual/Types/resources.html" target="_top">Resources</a> that should be added to
the content of the created jar file.</p></td></tr><tr><td style="border-right: 0.5pt solid ; " align="left" valign="top"><p><code class="literal">lib</code></p></td><td style="" align="left" valign="top"><p>One or more <a class="link" href="http://ant.apache.org/manual/Types/resources.html#collection" target="_top">Resource Collections</a>
that should be added to the set of jar libraries that make up the runtime dependency
classpath of the application.</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_examples" href="#_examples"></a>64.1.2&nbsp;Examples</h3></div></div></div><p><b>Specify start-class.&nbsp;</b>
</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;spring-boot:exejar</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">destfile</span>=<span xmlns:d="http://docbook.org/ns/docbook" class="hl-value">"target/my-application.jar"</span>
        <span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">classes</span>=<span xmlns:d="http://docbook.org/ns/docbook" class="hl-value">"target/classes"</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">start-class</span>=<span xmlns:d="http://docbook.org/ns/docbook" class="hl-value">"com.foo.MyApplication"</span><span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&gt;</span>
    <span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;resources&gt;</span>
        <span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;fileset</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">dir</span>=<span xmlns:d="http://docbook.org/ns/docbook" class="hl-value">"src/main/resources"</span><span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag"> /&gt;</span>
    <span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;/resources&gt;</span>
    <span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;lib&gt;</span>
        <span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;fileset</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">dir</span>=<span xmlns:d="http://docbook.org/ns/docbook" class="hl-value">"lib"</span><span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag"> /&gt;</span>
    <span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;/lib&gt;</span>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;/spring-boot:exejar&gt;</span></pre><p>
</p><p><b>Detect start-class.&nbsp;</b>
</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;exejar</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">destfile</span>=<span xmlns:d="http://docbook.org/ns/docbook" class="hl-value">"target/my-application.jar"</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">classes</span>=<span xmlns:d="http://docbook.org/ns/docbook" class="hl-value">"target/classes"</span><span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&gt;</span>
    <span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;lib&gt;</span>
        <span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;fileset</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">dir</span>=<span xmlns:d="http://docbook.org/ns/docbook" class="hl-value">"lib"</span><span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag"> /&gt;</span>
    <span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;/lib&gt;</span>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;/exejar&gt;</span></pre><p>
</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_spring_boot_findmainclass" href="#_spring_boot_findmainclass"></a>64.2&nbsp;spring-boot:findmainclass</h2></div></div></div><p>The <code class="literal">findmainclass</code> task is used internally by <code class="literal">exejar</code> to locate a class declaring a
<code class="literal">main</code>. You can also use this task directly in your build if needed. The following
attributes are supported</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">Attribute</th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">Description</th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top">Required</th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p><code class="literal">classesroot</code></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>The root directory of Java class files</p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>Yes <span class="emphasis"><em>(unless <code class="literal">mainclass</code> is specified)</em></span></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p><code class="literal">mainclass</code></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>Can be used to short-circuit the <code class="literal">main</code> class search</p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>No</p></td></tr><tr><td style="border-right: 0.5pt solid ; " align="left" valign="top"><p><code class="literal">property</code></p></td><td style="border-right: 0.5pt solid ; " align="left" valign="top"><p>The Ant property that should be set with the result</p></td><td style="" align="left" valign="top"><p>No <span class="emphasis"><em>(result will be logged if unspecified)</em></span></p></td></tr></tbody></table></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_examples_2" href="#_examples_2"></a>64.2.1&nbsp;Examples</h3></div></div></div><p><b>Find and log.&nbsp;</b>
</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;findmainclass</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">classesroot</span>=<span xmlns:d="http://docbook.org/ns/docbook" class="hl-value">"target/classes"</span><span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag"> /&gt;</span></pre><p>
</p><p><b>Find and set.&nbsp;</b>
</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;findmainclass</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">classesroot</span>=<span xmlns:d="http://docbook.org/ns/docbook" class="hl-value">"target/classes"</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">property</span>=<span xmlns:d="http://docbook.org/ns/docbook" class="hl-value">"main-class"</span><span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag"> /&gt;</span></pre><p>
</p><p><b>Override and set.&nbsp;</b>
</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;findmainclass</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">mainclass</span>=<span xmlns:d="http://docbook.org/ns/docbook" class="hl-value">"com.foo.MainClass"</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">property</span>=<span xmlns:d="http://docbook.org/ns/docbook" class="hl-value">"main-class"</span><span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag"> /&gt;</span></pre><p>
</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="build-tool-plugins-gradle-plugin.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="build-tool-plugins.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="build-tool-plugins-other-build-systems.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">63.&nbsp;Spring Boot Gradle plugin&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;65.&nbsp;Supporting other build systems</td></tr></table></div></body></html>